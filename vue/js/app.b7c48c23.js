(function(){"use strict";var e={7858:function(e,t,o){var r=o(5130),l=o(6768),n=o(4232);const s={class:"controls"},a=["value"],i=["value","min"],c={class:"board-description"},u=["onClick"],h={class:"info"};function C(e,t,o,C,P,d){return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Lk)("div",s,[(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>P.selectedType=e),onChange:t[1]||(t[1]=(...e)=>d.onOthelloTypeChange&&d.onOthelloTypeChange(...e))},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(P.gameRules.values(),e=>((0,l.uX)(),(0,l.CE)("option",{key:e.descript,value:e.descript},(0,n.v_)(e.descript),9,a))),128))],544),[[r.u1,P.selectedType]]),P.selectedType===P.gameRules.getDefaultCustomType().descript?((0,l.uX)(),(0,l.CE)("input",{key:0,type:"number",value:P.gameAction.information.getType().cols,onInput:t[2]||(t[2]=(...e)=>d.onCustomSizeChange&&d.onCustomSizeChange(...e)),min:P.gameRules.minSize,placeholder:"Board Size"},null,40,i)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",c,[(0,l.Lk)("p",null,"Board Size: "+(0,n.v_)(d.getBoardSizeDescription(P.gameAction)),1),(0,l.Lk)("label",null,[t[8]||(t[8]=(0,l.eW)(" Simulation Placement: ",-1)),(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>P.customPlacement=e),onChange:t[4]||(t[4]=(...e)=>d.onCustomPlacementChange&&d.onCustomPlacementChange(...e))},null,544),[[r.lH,P.customPlacement]])]),P.customPlacement?(0,l.bo)(((0,l.uX)(),(0,l.CE)("select",{key:0,"onUpdate:modelValue":t[5]||(t[5]=e=>P.selectedPiece=e),onChange:t[6]||(t[6]=(...e)=>d.onPieceSelectionChange&&d.onPieceSelectionChange(...e))},t[9]||(t[9]=[(0,l.Lk)("option",{value:"black"},"Black",-1),(0,l.Lk)("option",{value:"white"},"White",-1)]),544)),[[r.u1,P.selectedPiece]]):(0,l.Q3)("",!0)]),(0,l.Lk)("div",{class:"board",style:(0,n.Tr)(d.gridTemplateStyle)},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(P.board,(e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"row"},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e,(e,o)=>((0,l.uX)(),(0,l.CE)("div",{key:o,class:(0,n.C4)(d.getCellClassName(e)),onClick:e=>d.onCellClick(t,o)},null,10,u))),128))]))),128))],4),(0,l.Lk)("div",h,[(0,l.Lk)("p",null,"Current Player: "+(0,n.v_)(d.currentPlayerEmoji),1),(0,l.Lk)("p",null,"Black: "+(0,n.v_)(P.counts.black),1),(0,l.Lk)("p",null,"White: "+(0,n.v_)(P.counts.white),1)]),(0,l.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>d.onReset&&d.onReset(...e))},"Reset")])}var P,d;o(8111),o(116);(function(e){e["BLACK_PLAYER"]="black_player",e["WHITE_PLAYER"]="white_player"})(P||(P={})),function(e){e[e["BLACK"]=0]="BLACK",e[e["WHITE"]=1]="WHITE"}(d||(d={}));class E{constructor(e,t){this.rows=e,this.cols=e,this.descript=t}}E.SmallBoard=new E(6,"Small Board"),E.Classic=new E(8,"Classic"),E.LargeBoard=new E(12,"Large Board"),E.Custom=new E(4,"Custom");class p{constructor(){this.minSize=2}isIllegalSize(e){return isNaN(e)||e%2!==0||e<=this.minSize}values(){return[E.Classic,E.LargeBoard,E.SmallBoard,E.Custom]}getDefaultCustomType(){return E.Custom}createCustomOthelloType(e){return new E(e,E.Custom.descript)}}o(1701),o(4114);function L(e,t){return new g(e,t)}const m=[[-1,0],[1,0],[0,-1],[0,1],[-1,-1],[-1,1],[1,-1],[1,1]];class g{constructor(e,t){this.rows=e,this.cols=t}isLegalMove(e,t,o,r){if(!this.isPlaceable(e,t,o))return!1;const l=r===P.BLACK_PLAYER?d.BLACK:d.WHITE,n=r===P.BLACK_PLAYER?d.WHITE:d.BLACK;return m.some(([r,s])=>{let a=e+r,i=t+s,c=!1;while(a>=0&&a<this.rows&&i>=0&&i<this.cols&&o[a][i]===n)c=!0,a+=r,i+=s;return c&&a>=0&&a<this.rows&&i>=0&&i<this.cols&&o[a][i]===l})}playerMoveableCounts(e,t){let o=0;for(let r=0;r<t.length;r++)for(let l=0;l<t[r].length;l++)this.isLegalMove(r,l,t,e)&&(o+=1);return o}isPlaceable(e,t,o){return null===o[e][t]}getFlippableDiscs(e,t,o,r){const l=e===P.BLACK_PLAYER?d.WHITE:d.BLACK;let n=[];for(let[s,a]of m){let i=t+s,c=o+a,u=[];while(i>=0&&i<this.rows&&c>=0&&c<this.cols&&r[i][c]===l)u.push([i,c]),i+=s,c+=a;i>=0&&i<this.rows&&c>=0&&c<this.cols&&r[i][c]===(e===P.BLACK_PLAYER?d.BLACK:d.WHITE)&&(n=n.concat(u))}return n}putPiece(e,t,o,r){if(!this.isPlaceable(t,o,r))return!1;const l=this.getFlippableDiscs(e,t,o,r);if(0===l.length)return!1;r[t][o]=e===P.BLACK_PLAYER?d.BLACK:d.WHITE;for(let[n,s]of l)r[n][s]=e===P.BLACK_PLAYER?d.BLACK:d.WHITE;return!0}}var A,b;(function(e){e[e["PUT_SUCCESS"]=0]="PUT_SUCCESS",e[e["PUT_SUCCESS_KEEP_PUT"]=1]="PUT_SUCCESS_KEEP_PUT",e[e["PUT_FAIL"]=2]="PUT_FAIL",e[e["PUT_FAIL_EXCHANGE_PLAYER"]=3]="PUT_FAIL_EXCHANGE_PLAYER"})(A||(A={}));class T{constructor(e){this.controller=e,this.currentPlayer=e.currentPlayer}getBoard(){return this.controller.getBoard()}getPieceCounts(){return this.controller.getPieceCounts()}putPiece(e){const{row:t,col:o}=e;return this.controller.getBoard()[t][o]=this.currentPlayer===P.BLACK_PLAYER?d.BLACK:d.WHITE,A.PUT_SUCCESS}isGameOver(){return!1}}class _{constructor(e,t){if(this.othelloCore=L(e.rows,e.cols),this.currentPlayer=P.BLACK_PLAYER,null!=t)return void(this.board=t);this.board=Array(e.rows).fill(null).map(()=>Array(e.cols).fill(null));const o=Math.floor(e.rows/2),r=Math.floor(e.cols/2);this.board[o-1][r-1]=d.WHITE,this.board[o-1][r]=d.BLACK,this.board[o][r-1]=d.BLACK,this.board[o][r]=d.WHITE}getBoard(){return this.board}isGameOver(){const e=this.currentPlayer===P.BLACK_PLAYER?P.WHITE_PLAYER:P.BLACK_PLAYER;return this.othelloCore.playerMoveableCounts(this.currentPlayer,this.board)<=0&&this.othelloCore.playerMoveableCounts(e,this.board)<=0}convertPlayer(){this.currentPlayer=this.currentPlayer===P.BLACK_PLAYER?P.WHITE_PLAYER:P.BLACK_PLAYER}getPieceCounts(){let e=0,t=0;for(let o of this.board)for(let r of o)switch(r){case d.BLACK:e++;break;case d.WHITE:t++;break}return{black:e,white:t}}putPiece(e){const{row:t,col:o}=e,r=this.othelloCore.putPiece(this.currentPlayer,t,o,this.board),l=this.currentPlayer===P.BLACK_PLAYER?P.WHITE_PLAYER:P.BLACK_PLAYER,n=this.othelloCore.playerMoveableCounts(this.currentPlayer,this.board),s=this.othelloCore.playerMoveableCounts(l,this.board);return console.log(`${this.currentPlayer} putable counts ${n}, opponent putable counts ${s}`),r?(console.log(`${this.currentPlayer} put success.\n`),n>0&&0===s?A.PUT_SUCCESS_KEEP_PUT:(this.convertPlayer(),A.PUT_SUCCESS)):0===n&&s>0?(this.convertPlayer(),A.PUT_FAIL_EXCHANGE_PLAYER):A.PUT_FAIL}}function y(){return new f}class f{constructor(){this.othelloType=E.Classic,this.othelloController=new _(this.othelloType,null)}setCurrentPlayer(e){this.othelloController.currentPlayer=e}setCustomBoard(e){let t=this.othelloController.currentPlayer;this.othelloController=e?new T(this.othelloController):new _(this.othelloType,this.othelloController.getBoard()),this.othelloController.currentPlayer=t}setType(e){this.othelloType=e,this.resetGame()}resetGame(){this.othelloController=new _(this.othelloType,null)}isGameOver(){return this.othelloController.isGameOver()}putPiece(e){return this.othelloController.putPiece(e)}getStatus(){return{type:this.othelloType,currentPlayer:this.othelloController.currentPlayer}}getBoardData(){return{counts:this.othelloController.getPieceCounts(),board:this.othelloController.getBoard().map(e=>e.slice())}}}function v(e,t){return new B(e,t)}class B{constructor(e,t){this.othello=y(),this.information={getCurrentPlayer:()=>this.othello.getStatus().currentPlayer,getType:()=>this.othello.getStatus().type,getPieceCounts:()=>this.othello.getBoardData().counts,getBoard:()=>this.othello.getBoardData().board},this.customerBoard=this.othello,this.rule=e,this.callback=t}setType(e){this.rule.isIllegalSize(e.rows)?this.callback.onError(b.ILLEGAL_CUSTOM):(this.othello.setType(e),this.resetGame())}putPiece(e){const t=this.othello.putPiece(e),o=this.othello.getBoardData(),r=this.getWinner(o.counts);switch(t){case A.PUT_SUCCESS:this.callback.onBoardChange(o),this.othello.isGameOver()&&this.callback.onGameOver(r);break;case A.PUT_SUCCESS_KEEP_PUT:this.callback.onError(b.KEEP_PUTTING),this.callback.onBoardChange(o),this.othello.isGameOver()&&this.callback.onGameOver(r);break;case A.PUT_FAIL:case A.PUT_FAIL_EXCHANGE_PLAYER:if(this.othello.isGameOver())return this.callback.onBoardChange(o),void this.callback.onGameOver(r);const e=t==A.PUT_FAIL_EXCHANGE_PLAYER?b.EXCHANGE_PLAYER:b.ILLEGAL_PLACE;this.callback.onError(e);break}}getWinner(e){return e.black===e.white?null:e.black>e.white?P.BLACK_PLAYER:P.WHITE_PLAYER}resetGame(){this.othello.resetGame(),this.callback.onRestarted();const e=this.othello.getBoardData();this.callback.onBoardChange(e)}}(function(e){e[e["ILLEGAL_PLACE"]=0]="ILLEGAL_PLACE",e[e["ILLEGAL_CUSTOM"]=1]="ILLEGAL_CUSTOM",e[e["EXCHANGE_PLAYER"]=2]="EXCHANGE_PLAYER",e[e["KEEP_PUTTING"]=3]="KEEP_PUTTING"})(b||(b={}));class k{constructor(){this.rules=new p,this.action=v(this.rules,this)}}class S extends k{constructor(e,t,o,r){super(),this.onRestartedCallback=e,this.onErrorCallback=t,this.onGameOverCallback=o,this.onBoardChangeCallback=r}onError(e){this.onErrorCallback(e)}onRestarted(){this.onRestartedCallback()}onGameOver(e){this.onGameOverCallback(e)}onBoardChange(e){this.onBoardChangeCallback(e)}}var w={data(){const e=e=>{alert(`Error: ${b[e]}`)},t=e=>{if(null==e)return void alert("Game Over! Both sides draw");const t=e===P.BLACK_PLAYER?"Black":"White";alert(`Game Over! Winner: ${t}`)},o=e=>{this.board=[...e.board],this.counts=e.counts},r=()=>{this.customPlacement=!1},l=new S(r,e,t,o),n=l.rules,s=l.action;return{game:l,gameRules:n,gameAction:s,board:s.information.getBoard(),counts:s.information.getPieceCounts(),selectedType:s.information.getType().descript,customPlacement:!1,selectedPiece:d.BLACK}},computed:{gridTemplateStyle(){const e=this.board?.[0]?.length||0;return{gridTemplateRows:`repeat(${this.board.length}, 1fr)`,gridTemplateColumns:`repeat(${e}, 1fr)`}},currentPlayerEmoji(){const e=this.gameAction?.information?.getCurrentPlayer?.();return e===P.BLACK_PLAYER?"⚫ Black":e===P.WHITE_PLAYER?"⚪ White":""}},methods:{onCellClick(e,t){this.gameAction.putPiece({row:e,col:t})},onReset(){this.gameAction.resetGame()},onOthelloTypeChange(e){const t=e.target.value,o=this.gameRules.values().find(e=>e.descript===t)||this.gameRules.getDefaultCustomType();this.selectedType=o.descript,this.gameAction.setType(o)},onCustomSizeChange(e){const t=parseInt(e.target.value,10);this.gameAction.setType(this.gameRules.createCustomOthelloType(t))},getBoardSizeDescription(e){const t=e.information.getType();return`${t.rows} x ${t.cols}`},getCellClassName(e){return"cell "+(e===d.BLACK?"black":e===d.WHITE?"white":"")},onCustomPlacementChange(e){const t=e.target.checked;this.customPlacement=t,this.gameAction.customerBoard.setCustomBoard(t)},onPieceSelectionChange(e){this.selectedPiece="black"===e.target.value?d.BLACK:d.WHITE;const t="black"===e.target.value?P.BLACK_PLAYER:P.WHITE_PLAYER;this.gameAction.customerBoard.setCurrentPlayer(t)}}},R=o(1241);const I=(0,R.A)(w,[["render",C],["__scopeId","data-v-308abd0b"]]);var K=I;(0,r.Ef)(K).mount("#app")}},t={};function o(r){var l=t[r];if(void 0!==l)return l.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,r,l,n){if(!r){var s=1/0;for(u=0;u<e.length;u++){r=e[u][0],l=e[u][1],n=e[u][2];for(var a=!0,i=0;i<r.length;i++)(!1&n||s>=n)&&Object.keys(o.O).every(function(e){return o.O[e](r[i])})?r.splice(i--,1):(a=!1,n<s&&(s=n));if(a){e.splice(u--,1);var c=l();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,l,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var l,n,s=r[0],a=r[1],i=r[2],c=0;if(s.some(function(t){return 0!==e[t]})){for(l in a)o.o(a,l)&&(o.m[l]=a[l]);if(i)var u=i(o)}for(t&&t(r);c<s.length;c++)n=s[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(u)},r=self["webpackChunkothello_vue"]=self["webpackChunkothello_vue"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[504],function(){return o(7858)});r=o.O(r)})();
//# sourceMappingURL=app.b7c48c23.js.map